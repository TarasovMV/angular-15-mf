name: mnr-crm ci/cd



on:
    push:
        branches:
            - main

jobs:
    install:
        runs-on: ubuntu-latest
        steps:
            -   name: checkout
                uses: actions/checkout@v3
            -   name: caching
                id: caching
                uses: actions/cache@v3
                with:
                    path: node_modules
                    key: node-modules-${{ hashFiles('package-lock.json') }}
            -   if: ${{ steps.caching.outputs.cache-hit != 'true' }}
                name: install
                run: npm ci

    affected:
        runs-on: ubuntu-latest
        needs: install
        steps:
            -   name: checkout
                uses: actions/checkout@v3
                with:
                    fetch-depth: 5
            -   name: restore cache
                id: cache-node-modules
                uses: actions/cache@v3
                with:
                    path: node_modules
                    key: node-modules-${{ hashFiles('package-lock.json') }}
            -   name: test
                run: echo "AFFECTED=$(npm run affected:ci)" >> $GITHUB_ENV

    print:
        runs-on: ubuntu-latest
        needs: install
        steps:
            -   name: Get color
                run: echo "Affected project is ${{ $AFFECTED }}"







